<div class="overlay">
  <div class="popup popup-registration">
    <div class="popup__close" (click)="closeMe()"></div>


    <ng-template [ngTemplateOutlet]="currentTemplate">
    </ng-template>


    <ng-template #emailInputTemplate>
    <h6 class="popup__title">Forgot password?</h6>
    <form class="popup__form" id="fgt-pass" [formGroup]="emailForm">
      <div class="wrap-input popup__wrap-input">
        <input
          required
          class="wrap-input__input"
          formControlName="email"
          [ngClass]="{'input--error': !emailForm.get('email').valid && emailForm.get('email').touched}"
        >
        <label class="wrap-input__label" for="">Email</label>
        <div class="wrap-input__line"></div>
        <!--Input error section starts-->
        <div *ngIf="!emailForm.valid && emailSubmited">
            <span class="wrap-input__message" *ngIf="emailForm.get('email').errors['required']">
              This field is required.
            </span>
          <span class="wrap-input__message" *ngIf="emailForm.get('email').errors['pattern']">
              Please, enter valid email address.
            </span>
        </div>
        <!--Input error section ends-->
      </div>
      <button class="btn popup__btn" (click)="emailSubmit()"
              [ngClass]="{'bg-none': !emailForm.valid}" >Reset password</button>
    </form>
    <div class="popup__links-wrap popup__links-wrap--left">
      <a class="popup__link" (click)="backToLogin()">
        <span class="popup__arr-left">
          <svg width="9" height="7" viewBox="0 0 9 7" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3.82596 0.119541C3.60017 -0.0567689 3.25769 -0.0355965 3.06102 0.166823L0.137687 3.17624L0.133319 3.18071C-0.0387293 3.35787 -0.0421708 3.61517 0.110923 3.7948C0.119367 3.80467 0.128289 3.81436 0.137687 3.82376L3.06102 6.83318C3.25769 7.0356 3.60017 7.05677 3.82596 6.88046C4.05175 6.70415 4.07536 6.3971 3.87872 6.19459L1.73329 3.98602H8.45783C8.75727 3.98602 9 3.76841 9 3.49991C9 3.23141 8.75727 3.0138 8.45783 3.0138H1.73348L3.87872 0.805412C4.07536 0.602898 4.05175 0.295851 3.82596 0.119541Z"/>
          </svg>
        </span>Back to log in</a>
    </div>
    </ng-template>

    <ng-template #captchaTemplate>
      <h6 class="popup__title">Registration</h6>
      <re-captcha (resolved)="resolvedCaptcha($event)" [siteKey]="recaptchaKey"></re-captcha>
      <div class="popup__links-wrap">
        <a class="popup__link" (click)="setTemplate('emailInputTemplate')">Go to registration form</a>
      </div>
    </ng-template>

    <ng-template #emailConfirmLinkTemplate>
      <h6 class="popup__title">Confirm the email</h6>
      <h4 class="popup__subtitle" [innerHtml]="afterCaptchaMessage"></h4>
      <hr style="width: 70%;">
      <div class="popup__links-wrap">
        <a class="popup__link"><span>If you haven't received the email, do the following:</span><br><span>Check spam or other folders.<br>Set email address whitelist.</span>
          How to set?<span><br>Check the mail client works normally.</span></a>
      </div>
    </ng-template>

  </div>
</div>
