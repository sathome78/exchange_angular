<div class="container">
  <!--balance-mob start-->
  <div
    class="balance balance--mob"
    *ngIf="(breakpointService.breakpoint$ | async) === 'mobile'"
  >
    <ng-container [ngSwitch]="currTab">
      <app-balance-mob
        [hidden]="currTab !== Tab.CRYPTO"
        [balances]="cryptoBalances$ | async"
        [countEntries]="countOfCryptoEntries$ | async"
        [countOfPendingRequests]="countOfPendingRequests$ | async"
        [countPerPage]="countPerPage"
        [countOfEntries]="getCountOfEntries() | async"
        [currentPage]="currentPage"
        [Tab]="Tab"
        [currTab]="currTab"
        [cryptoCurrenciesForChoose]="cryptoCurrenciesForChoose$ | async"
        [fiatCurrenciesForChoose]="fiatCurrenciesForChoose$ | async"
        [loading]="loading$ | async"
        (toggleAllZero)="onToggleAllZeroMobile($event)"
        (loadMore)="loadMoreBalancesForMobile($event)"
        (openRefillBalancePopup)="openRefillBalancePopup($event)"
        (openSendMoneyPopup)="openSendMoneyPopup($event)"
        (selectTab)="onSelectTab($event)"
        (filterByCurrencyForMobile)="filterByCurrencyForMobile($event)"
        (goToBalanceDetails)="onGoToBalanceDetails($event)"
        [leaveAnimationFn]="leaveAnimationFn"
      ></app-balance-mob>

      <app-balance-mob
        [hidden]="currTab !== Tab.FIAT"
        [balances]="fiatBalances$ | async"
        [countEntries]="countOfFiatEntries$ | async"
        [countOfPendingRequests]="countOfPendingRequests$ | async"
        [countPerPage]="countPerPage"
        [countOfEntries]="getCountOfEntries() | async"
        [currentPage]="currentPage"
        [Tab]="Tab"
        [currTab]="currTab"
        [cryptoCurrenciesForChoose]="cryptoCurrenciesForChoose$ | async"
        [fiatCurrenciesForChoose]="fiatCurrenciesForChoose$ | async"
        [loading]="loading$ | async"
        (toggleAllZero)="onToggleAllZeroMobile($event)"
        (loadMore)="loadMoreBalancesForMobile($event)"
        (openRefillBalancePopup)="openRefillBalancePopup($event)"
        (openSendMoneyPopup)="openSendMoneyPopup($event)"
        (selectTab)="onSelectTab($event)"
        (filterByCurrencyForMobile)="filterByCurrencyForMobile($event)"
        (goToBalanceDetails)="onGoToBalanceDetails($event)"
        [leaveAnimationFn]="leaveAnimationFn"
      ></app-balance-mob>

      <app-qubera-mob
        [hidden]="currTab !== Tab.QUBERA"
        [Tab]="Tab"
        [currTab]="currTab"
        [balances]="quberaBalances$ | async"
        [countOfPendingRequests]="countOfPendingRequests$ | async"
        [kycStatus]="quberaKycStatus$ | async"
        (selectTab)="onSelectTab($event)"
        (quberaKycVerification)="goToQuberaKYCPopup($event)"
        (createQuberaAccount)="goToCreateQuberaAccountPopup($event)"
        (openRefillBalancePopup)="openRefillBalancePopup($event)"
        (openSendMoneyPopup)="openSendMoneyPopup($event)"
        [leaveAnimationFn]="leaveAnimationFn"
      ></app-qubera-mob>

      <app-ieo-table-mob
        [hidden]="currTab !== Tab.IEO"
        [IEOData]="IEOData"
        [Tab]="Tab"
        [currTab]="currTab"
        [countOfPendingRequests]="countOfPendingRequests$ | async"
        (openRefillBalancePopup)="openRefillBalancePopup($event)"
        (openSendMoneyPopup)="openSendMoneyPopup($event)"
        (selectTab)="onSelectTab($event)"
        (filterByCurrencyForMobile)="filterByCurrencyForMobile($event)"
        (goToBalanceDetails)="onGoToIEOBalanceDetails($event)"
        [leaveAnimationFn]="leaveAnimationFn"
      ></app-ieo-table-mob>
    </ng-container>
  </div>
  <!--balance-mob end-->


  <!--balance-desktop start-->
  <div
    class="balance"
    [ngClass]="{'balance-fiat': currTab === Tab.FIAT, 'active' : startAnimation}"
    *ngIf="(breakpointService.breakpoint$ | async) === 'desktop'"
  >
    <div class="page-title">
      <h1 class="page-title__text fade-anim del2">
        {{'Balances' | translate}}
      </h1>
      <div class="balance__your-active fade-anim del2">
        <h6 class="txt-grey">{{'Estimated Holdings:' | translate}}</h6>
        <div class="row">
          <div class="balance__your-active-item">
            <span>
              <svg
                width="9"
                height="15"
                viewBox="0 0 9 15"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M8.64546 7.86933C8.3561 7.41871 7.91945 7.10919 7.33554 6.94097C8.07911 6.48419 8.40588 5.70893 8.31617 4.61505C8.28618 4.21839 8.19515 3.87461 8.04288 3.58322C7.89051 3.29176 7.68488 3.05745 7.42523 2.8802C7.16578 2.70272 6.88361 2.56762 6.57935 2.47447C6.27502 2.38133 5.92563 2.3137 5.5314 2.27167V0H4.37878V2.20856C4.17919 2.20856 3.87481 2.21456 3.46566 2.22659V0H2.31289V2.27167C2.14816 2.2777 1.90618 2.28077 1.58683 2.28077L-5.92065e-08 2.27167V3.75009H0.830799C1.21006 3.75009 1.43212 3.95446 1.49698 4.36306V6.95028C1.54695 6.95028 1.58683 6.95338 1.61679 6.95938H1.49698V10.5831C1.4571 10.8895 1.31241 11.0429 1.06287 11.0429H0.232128L5.23465e-05 12.6926H1.49711C1.59194 12.6926 1.72908 12.6941 1.9088 12.6968C2.08841 12.6998 2.22309 12.7013 2.31294 12.7013V15H3.4659V12.7284C3.67542 12.7345 3.97981 12.7375 4.37902 12.7375V15H5.53166V12.7013C5.94094 12.6773 6.30394 12.6325 6.62067 12.5662C6.93756 12.4998 7.24079 12.3963 7.53015 12.255C7.81948 12.1139 8.06147 11.938 8.25605 11.7276C8.45074 11.5175 8.61153 11.2499 8.739 10.9253C8.86605 10.6008 8.94724 10.2252 8.98206 9.79837C9.04721 8.96324 8.93487 8.32015 8.64546 7.86933ZM3.48808 3.84898C3.52302 3.84898 3.62157 3.84746 3.78375 3.84443C3.94601 3.84134 4.08069 3.83837 4.18797 3.83534C4.29528 3.83237 4.44 3.83988 4.62221 3.85791C4.80434 3.87594 4.95776 3.90003 5.08248 3.93003C5.20719 3.96002 5.34455 4.00962 5.49412 4.07874C5.64395 4.14779 5.76363 4.23197 5.85335 4.33111C5.94324 4.43025 6.01933 4.55651 6.08159 4.70977C6.14404 4.863 6.17524 5.03877 6.17524 5.23706C6.17524 5.40534 6.15283 5.55864 6.10797 5.69693C6.06319 5.83513 5.99565 5.95085 5.90594 6.04399C5.8162 6.13716 5.7237 6.21837 5.62887 6.28742C5.53415 6.35647 5.41303 6.41211 5.26587 6.45413C5.11874 6.49622 4.99025 6.52928 4.88053 6.55327C4.77073 6.57733 4.63353 6.59391 4.46884 6.60288C4.30411 6.61184 4.17932 6.61797 4.09453 6.62094C4.00967 6.62391 3.89368 6.62391 3.74642 6.62094C3.59913 6.61797 3.51317 6.61639 3.48815 6.61639V3.84894H3.48808V3.84898ZM6.63572 9.98778C6.58819 10.1261 6.52716 10.2463 6.45236 10.3486C6.37743 10.4506 6.27883 10.5408 6.15663 10.6188C6.03445 10.6971 5.91582 10.76 5.80115 10.8081C5.68632 10.8564 5.54778 10.8982 5.38576 10.9344C5.22337 10.9705 5.08125 10.9959 4.95886 11.011C4.83667 11.0261 4.69077 11.0381 4.52104 11.0471C4.35144 11.056 4.21912 11.0606 4.12434 11.0606C4.02952 11.0606 3.90973 11.0589 3.76501 11.056C3.62021 11.0532 3.52798 11.0517 3.48802 11.0517V8.00463C3.5279 8.00463 3.64643 8.00169 3.84358 7.99557C4.04076 7.9895 4.20161 7.98669 4.32637 7.98669C4.45111 7.98669 4.62334 7.99557 4.84298 8.01372C5.06242 8.03162 5.24707 8.05856 5.3969 8.09461C5.54655 8.13073 5.70986 8.18624 5.88714 8.26145C6.06424 8.33653 6.20778 8.42816 6.3176 8.53633C6.4274 8.64469 6.51966 8.7827 6.59448 8.95102C6.66949 9.11925 6.7069 9.3116 6.7069 9.528C6.70688 9.69645 6.6832 9.84946 6.63572 9.98778Z"
                />
              </svg>
            </span>
            {{(myBalances$ | async)['BTC'] | roundCurrency | formatCurrency}}
          </div>
          <div class="balance__your-active-item">
            <span>
              <svg
                width="6"
                height="13"
                viewBox="0 0 6 13"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M4.61044 5.90536C4.15604 5.62344 3.67294 5.40864 3.19463 5.18579C2.9172 5.05692 2.65174 4.90656 2.41736 4.69714C1.95579 4.28366 2.04428 3.61242 2.58477 3.34662C2.73784 3.27144 2.89807 3.24727 3.0607 3.23653C3.68729 3.19895 4.2828 3.32782 4.8496 3.6339C5.13181 3.78695 5.22508 3.73862 5.32074 3.40837C5.42119 3.05933 5.5049 2.70492 5.59817 2.35319C5.66035 2.11692 5.58382 1.96119 5.38532 1.86185C5.0218 1.68196 4.64871 1.55308 4.25649 1.48327C3.74469 1.39467 3.74469 1.39199 3.7423 0.814727C3.73991 0.00119332 3.73991 0.0011933 3.01287 0.0011933C2.90764 0.0011933 2.80241 -0.00149163 2.69718 0.0011933C2.35757 0.011933 2.30018 0.0790563 2.29061 0.463001C2.28583 0.634837 2.29061 0.806672 2.28822 0.981193C2.28583 1.49133 2.28343 1.48328 1.84817 1.66048C0.795871 2.09007 0.145361 2.89555 0.0760049 4.18431C0.0138237 5.32541 0.544755 6.09599 1.37942 6.65714C1.89361 7.00349 2.4628 7.20755 3.00808 7.47873C3.22093 7.58344 3.42422 7.70426 3.6012 7.87073C4.12495 8.3567 4.02929 9.16486 3.40748 9.47094C3.07505 9.63472 2.72349 9.675 2.36236 9.62398C1.80512 9.54612 1.2718 9.38234 0.769564 9.08968C0.475399 8.91785 0.389302 8.96349 0.288855 9.32059C0.202759 9.62935 0.126228 9.94081 0.0496975 10.2523C-0.0531405 10.6711 -0.0148754 10.7704 0.34147 10.9664C0.795871 11.2135 1.28136 11.3397 1.77642 11.4283C2.16386 11.4981 2.17581 11.5169 2.1806 11.9679C2.18299 12.172 2.18299 12.3787 2.18538 12.5828C2.18777 12.8405 2.29778 12.9909 2.53455 12.9963C2.80241 13.0016 3.07266 13.0016 3.34051 12.9936C3.56054 12.9882 3.67294 12.854 3.67294 12.6043C3.67294 12.325 3.6849 12.0431 3.67533 11.7639C3.66338 11.4793 3.77339 11.3343 4.01733 11.2591C4.57935 11.0873 5.05767 10.749 5.42597 10.2442C6.44957 8.84804 6.05974 6.80481 4.61044 5.90536Z"
                />
              </svg>
            </span>
            {{(myBalances$ | async)['USD'] | roundCurrency:'USD' | formatCurrency}}
          </div>
        </div>
      </div>

      <!-- <div [hidden]="!(loading$ | async)">
        <app-loader size="small"></app-loader>
      </div> -->
      <button
        class="btn btn--active balance__title-btn fade-move-anim del1"
        (click)="openRefillBalancePopup(true)"
      >
        {{'Refill balance' | translate}}
      </button>
      <button
        class="btn balance__title-btn fade-move-anim del4"
        style="margin-left: 32px;"
        (click)="openSendMoneyPopup(true)"
      >
        {{'Send money' | translate}}
      </button>
    </div>
    <!--filters start-->
    <!--<form action="">-->
    <div
      class="balance__filters fade-anim del5"
      [ngClass]="{'balance__filters--pending-open': currTab === Tab.PR}"
    >
      <ng-container [ngSwitch]="currTab">
        <app-dynamic-input
          *ngSwitchCase="Tab.CRYPTO"
          [value]="currValue"
          [options]="cryptoCurrenciesForChoose && getCryptoDynamicIData"
          (onChange)="onChangeCurrPair($event)"
          (onSelect)="onSelectPair($event.id)"
          [showNotFoundTip]="true"
        ></app-dynamic-input>
        <app-dynamic-input
          *ngSwitchCase="Tab.FIAT"
          [value]="currValue"
          [options]="fiatCurrenciesForChoose && getFiatDynamicIData"
          (onChange)="onChangeCurrPair($event)"
          (onSelect)="onSelectPair($event.id)"
          [showNotFoundTip]="true"
        ></app-dynamic-input>
        <app-dynamic-input
          *ngSwitchCase="Tab.QUBERA"
          [value]="currValue"
          [options]="!existQuberaAccounts ? [] : fiatCurrenciesForChoose && getFiatDynamicIData"
          (onChange)="onChangeCurrPair($event)"
          (onSelect)="onSelectPair($event.id)"
          [showNotFoundTip]="existQuberaAccounts"
        ></app-dynamic-input>

        <app-dynamic-input
          *ngSwitchCase="Tab.IEO"
          [value]="currValue"
          [options]="[]"
          (onChange)="onChangeCurrPair($event)"
          (onSelect)="onSelectPair($event.id)"
          [showNotFoundTip]="true"
        ></app-dynamic-input>

        <app-dynamic-input
          *ngSwitchCase="Tab.PR"
          [value]="currValue"
          [options]="(allCurrenciesForChoose$ | async) | dynamicIData: 'name': 'name'"
          (onChange)="onChangeCurrPair($event)"
          (onSelect)="onSelectPair($event.id)"
          [showNotFoundTip]="true"
        ></app-dynamic-input>
      </ng-container>

      <div class="tabs balance__tabs">
        <button
          class="tabs__item"
          [ngClass]="{'tabs__item--active': currTab === Tab.CRYPTO}"
          (click)="onSelectTab(Tab.CRYPTO)"
          [disabled]="loading$ | async"
        >
          {{'Crypto Balances' | translate}}
        </button>

        <button
          [disabled]="loading$ | async"
          class="tabs__item"
          [ngClass]="{'tabs__item--active': currTab === Tab.FIAT}"
          (click)="onSelectTab(Tab.FIAT)"
        >
          {{'Exchange wallet' | translate}}
        </button>

        <!-- FUG BLOCK -->
        <button
          *ngIf="utilsService.isDeveloper"
          class="tabs__item funding-tabs"
          [ngClass]="{'tabs__item--active': currTab === Tab.QUBERA}"
          (click)="onSelectTab(Tab.QUBERA)"
          [disabled]="loading$ | async"
        >
          <div class="qubera-icon">
            <svg
              width="24"
              height="21"
              viewBox="0 0 24 21"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M4.14605 7.02734H6.0973L6.39013 16.003H3.90234L4.14605 7.02734Z"
                fill="white"
              />
              <path
                d="M2.48779 16.4883H21.5124V17.5126H22.9757V18.9761H24V20.0005H0V18.9761H1.02427V17.5126H2.48779V16.4883Z"
                fill="white"
              />
              <path
                d="M22.4872 4.39023L11.9994 0L1.51172 4.39023V5.02454H22.4872V4.39023Z"
                fill="white"
              />
              <path
                d="M20.4873 5.51172H3.51172V6.48702H20.4873V5.51172Z"
                fill="white"
              />
              <path
                d="M17.8534 7.02734H19.8043L20.0972 16.003H17.6094L17.8534 7.02734Z"
                fill="white"
              />
              <path
                d="M13.2694 7.02734H15.2693L15.5621 16.003H13.0254L13.2694 7.02734Z"
                fill="white"
              />
              <path
                d="M8.73017 7.02734H10.6814L10.9741 16.003H8.4375L8.73017 7.02734Z"
                fill="white"
              />
            </svg>
          </div>
          <span>{{'Funding wallet' | translate}}</span>
          <a
            href="https://support.exrates.me/article/kyc-fiat-account"
            class="hint-link"
            target="_blank"
          >?</a>
        </button>

        <button
          [disabled]="loading$ | async"
          class="tabs__item"
          [ngClass]="{'tabs__item--active': currTab === Tab.IEO}"
          (click)="onSelectTab(Tab.IEO)"
        >
          {{'IEO' | translate}}
        </button>

        <button
          class="tabs__item"
          [ngClass]="{'tabs__item--active': currTab === Tab.PR}"
          (click)="onSelectTab(Tab.PR)"
          [disabled]="loading$ | async"
        >
          <span>{{'Pending requests' | translate}}</span>
          <span class="indicate">{{countOfPendingRequests$ | async}}</span>
        </button>

      </div>
      <div
        class="balance__hide-zero"
        *ngIf="!(currTab === Tab.PR || currTab === Tab.QUBERA || currTab === Tab.IEO || this.filtering)"
      >
        <label
          for=""
          class="toggler"
        >
          <input
            type="checkbox"
            name="hideZero"
            [(ngModel)]="hideAllZero"
            (change)="onToggleAllZero()"
          >
          <span class="toggler__indicate"></span>
        </label>
        <span>{{'Hide zero balances' | translate}}</span>
      </div>


      <!-- <div class="balance__show-all">
        <label class="toggler">
          <input type="checkbox" name="">
          <span class="toggler__indicate"></span>
        </label>
        <span>Show all in</span>
        <div class="dropdown">
          <div class="dropdown__btn">USD</div>
          <ul class="dropdown__list">
            <li class="dropdown__item">RUB</li>
            <li class="dropdown__item">EUR</li>
            <li class="dropdown__item">UAH</li>
          </ul>
        </div>
      </div> -->

    </div>
    <!--</form>-->
    <!--filters end-->

    <ng-container>
      <app-balance-table
        [hidden]="currTab !== Tab.CRYPTO"
        [allPairs]="detailedCurrencyPairs$ | async"
        [balances]="cryptoBalances$ | async"
        [countPerPage]="countPerPage"
        [countOfEntries]="getCountOfEntries() | async"
        [currentPage]="currentPage"
        [loading]="loading$ | async"
        (paginate)="onPageChanged($event)"
        (transferOut)="goToTransferPopup($event)"
        (cryptoWithdrawOut)="goToCryptoWithdrawPopup($event)"
        (cryptoDepositOut)="goToCryptoDepositPopup($event)"
        [leaveAnimationFn]="leaveAnimationFn"
      ></app-balance-table>
      <app-balance-table
        [hidden]="currTab !== Tab.FIAT"
        [allPairs]="detailedCurrencyPairs$ | async"
        [balances]="fiatBalances$ | async"
        [countPerPage]="countPerPage"
        [countOfEntries]="getCountOfEntries() | async"
        [currentPage]="currentPage"
        [loading]="loading$ | async"
        (paginate)="onPageChanged($event)"
        (transferOut)="goToTransferPopup($event)"
        (cryptoWithdrawOut)="goToCryptoWithdrawPopup($event)"
        (cryptoDepositOut)="goToCryptoDepositPopup($event)"
        [leaveAnimationFn]="leaveAnimationFn"
      ></app-balance-table>
      <app-pending-request-table
        [pendingRequests]="pendingRequests$ | async"
        [countPerPage]="countPerPage"
        [countOfEntries]="getCountOfEntries() | async"
        [currentPage]="currentPage"
        [loading]="loading$ | async"
        (paginate)="onPageChanged($event)"
        (revokePendingRequest)="onRevokePendingRequest($event)"
        [hidden]="currTab !== Tab.PR"
        [leaveAnimationFn]="leaveAnimationFn"
      ></app-pending-request-table>
      <ng-container>
        <app-qubera-table
          [hidden]="currTab !== Tab.QUBERA"
          [balances]="quberaBalances$ | async"
          [kycStatus]="quberaKycStatus$ | async"
          (transferQuberaOut)="goToTransferQuberaPopup($event)"
          (cryptoWithdrawQuberaOut)="goToQuberaWithdrawPopup($event)"
          (quberaKycVerification)="goToQuberaKYCPopup($event)"
          (createQuberaAccount)="goToCreateQuberaAccountPopup($event)"
          (cryptoDepositQuberaOut)="goToQuberaDepositPopup($event)"
          [loading]="loading$ | async"
          [leaveAnimationFn]="leaveAnimationFn"
        >
        </app-qubera-table>
      </ng-container>

      <app-ieo-table
        [hidden]="currTab !== Tab.IEO"
        [countPerPage]="countPerPage"
        [countOfEntries]="getCountOfEntries() | async"
        [currentPage]="currentPage"
        [IEOData]="IEOData"
        [loading]="loading$ | async"
        (paginate)="onPageChanged($event)"
        [leaveAnimationFn]="leaveAnimationFn"
      ></app-ieo-table>
    </ng-container>

  </div>


  <!--balance-desktop end-->
</div>

<div>
  <app-refill-money
    *ngIf="showRefillBalancePopup"
    [showPopup]="showRefillBalancePopup"
    [optionData]="refillBalanceData"
    (closeRefillBalancePopup)="openRefillBalancePopup(false)"
  ></app-refill-money>
</div>

<div>
  <app-send-money
    *ngIf="showSendMoneyPopup"
    [showPopup]="showSendMoneyPopup"
    [optionData]="sendMoneyData"
    (closeSendMoneyPopup)="openSendMoneyPopup(false)"
  ></app-send-money>

  <app-qubera-popup
    *ngIf="showQuberaPopup"
    [showPopup]="showQuberaPopup"
    [balances]="quberaBalances$ | async"
    [optionData]="quberaData"
    [steper]="1"
    (closeQuberaPopupMain)="openQuberaPopup(false)"
    (getKYCStatus)="getTableAndKYCStatus()"
  >
  </app-qubera-popup>
</div>
