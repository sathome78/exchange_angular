<div class="ieo-container">
  <div class="ieo-header" *ngIf="currentStage !== stage.PENDING">
    <app-ieo-header
      [IEOData]="IEOData"
      [userBalanceBTC]="userBalanceBTC"
      [currentStage]="currentStage"
      [isAuthenticated]="isAuthenticated"
      [ieoLoading]="ieoLoading"
      [requirements]="requirements || {}"
      (onLogin)="onLogin()"
      (onBuy)="onBuy()"
    ></app-ieo-header>
  </div>
  <app-ieo-info
    [isAuthenticated]="isAuthenticated"
    [currentStage]="currentStage"
    [userBalanceBTC]="userBalanceBTC"
    (onLogin)="onLogin()"
    (onRefreshIEOStatus)="onRefreshIEOStatus()"
    (onBuy)="onBuy()"
    [IEOData]="IEOData"
    [ieoLoading]="ieoLoading"
    [requirements]="requirements || {}"
  ></app-ieo-info>

  <app-ieo-community
    *ngIf="ieoData.community && ieoData.community.length"
    [community]="ieoData.community"
  ></app-ieo-community>

  <app-ieo-requirements
    *ngIf="
      (stage.RUNNING === currentStage ||
      stage.PENDING === currentStage)
    "
    [isAuthenticated]="isAuthenticated"
    [requirements]="requirements"
    (showPolicy)="openPolicy()"
  ></app-ieo-requirements>

  <app-get-ready-banner
    *ngIf="
      (stage.TERMINATED === currentStage ||
      stage.SUCCEEDED === currentStage ||
      stage.FAILED === currentStage) &&
      (isAuthenticated &&
      requirements &&
      !requirements.kycCheck)
    "
    (onClick)="bannerClick()"
  ></app-get-ready-banner>

  <app-ieo-how-it-works></app-ieo-how-it-works>

  <app-ieo-descriptions
    [description]="ieoData.description"
    [ieoToken]="IEOData.currencyDescription"
  ></app-ieo-descriptions>

  <app-popup-failed
    *ngIf="showNoReqs"
    (close)="closeNoReqs()"
    [IEOData]="IEOData"
  ></app-popup-failed>
  <app-popup-buy
    [IEOData]="IEOData"
    *ngIf="showBuy"
    (close)="closeBuy()"
    (confirm)="confirmBuy($event)"
  ></app-popup-buy>

  <app-popup-policy
    *ngIf="showPolicy"
    (close)="closePolicy()"
    (onAgree)="agreeWithPolicy()"
  ></app-popup-policy>

  <app-popup-success
    [IEOName]="IEOData.currencyDescription"
    *ngIf="showSuccess"
    (close)="closeSuccess()"
  >
  </app-popup-success>
</div>
